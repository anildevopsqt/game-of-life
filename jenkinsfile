pipeline{
    agent{ label 'maven_jdk'} 
    triggers { cron ('H/15 * * * *')}
    parameter {
        string(name:'MAVEN_GOAL', defaultValue:'package', description:'maven goal')
    }
    stages{
        stage('vcs'){
            steps{
            git branch: 'declarative', url: 'https://github.com/anildevopsqt/game-of-life.git'
            }
        }
        stage('build'){
            tools{jdk 'JDK_8'}
            steps {
            sh "mvn ${params.MAVEN_GOAL}"
        }

        }
        stage('postbuild'){
            steps{
                archiveArtifacts artifacts: '**/target/gameoflife.war',
                                 onlyIfSuccessful: true
                junit testResults: '**/surefire-report/TEST-*.xml',
                  allowEmptyResults : true
        }

        }
            
     }
}